# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–•—Ä–∞–Ω–∏–ª–∏—â–∞, –ø–æ –∑–∞–º—ã—Å–ª—É, –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö –∏ –º–æ–≥—É—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–ª–æ–∂–Ω–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —á–µ–º –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å. –ö —Å—á–∞—Å—Ç—å—é, —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∞–∫. –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Ç—Ä–µ—Ö –≤–µ—â–∞—Ö:

- –≠–∫–∑–µ–º–ø–ª—è—Ä `pinia`: —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –Ω–µ–≥–æ
- `actions`: –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –æ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–∞–º—É—é —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –Ω–∞—à–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â. –†–∞–∑–≤–µ –Ω–µ –±—ã–ª–æ –±—ã –Ω–µ–ø–ª–æ—Ö–æ, –µ—Å–ª–∏ –±—ã –Ω–∞–¥ –Ω–∏–º–∏ –∏–∑–¥–µ–≤–∞–ª–∏—Å—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?
- –ü–ª–∞–≥–∏–Ω—ã: –ï—Å–ª–∏ –≤—ã –ø–æ–ª–∞–≥–∞–µ—Ç–µ—Å—å –Ω–∞ –ø–ª–∞–≥–∏–Ω—ã, –≤–∞–º —Ç–∞–∫–∂–µ –ø—Ä–∏–¥–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –∏–ª–∏ –∫–∞–∫ –≤—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ, –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ–± —ç—Ç–∏—Ö —Ç—Ä–µ—Ö –ø–æ-—Ä–∞–∑–Ω–æ–º—É:

- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞](#testing-stores)
  - [–ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞](#unit-testing-a-store)
  - [–ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#unit-testing-components)
    - [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è](#initial-state)
    - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—à–µ–Ω–æ–≤](#customizing-behavior-of-actions)
    - [–£–∫–∞–∑–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ createSpy](#specifying-the-createspy-function)
    - [Mocking getters](#mocking-getters)
    - [–ü–ª–∞–≥–∏–Ω—ã pinia](#pinia-plugins)
  - [E2E tests](#e2e-tests)
  - [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Vue 2)](#unit-test-components-vue-2)

## –ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–î–ª—è –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω–æ–π —á–∞—Å—Ç—å—é —è–≤–ª—è–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `pinia`:

```js
// stores/counter.spec.ts
import { setActivePinia, createPinia } from 'pinia'
import { useCounter } from '../src/stores/counter'

describe('Counter Store', () => {
  beforeEach(() => {
    // —Å–æ–∑–¥–∞–µ–º —Å–≤–µ–∂—É—é pinia –∏ –¥–µ–ª–∞–µ–º –µ–µ –∞–∫—Ç–∏–≤–Ω–æ–π, —á—Ç–æ–±—ã –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–ª–∞—Å—å
    // –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª—é–±—ã–º –≤—ã–∑–æ–≤–æ–º useStore() –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ –µ–º—É:
    // `useStore(pinia)`.
    setActivePinia(createPinia())
  })

  it('increments', () => {
    const counter = useCounter()
    expect(counter.n).toBe(0)
    counter.increment()
    expect(counter.n).toBe(1)
  })

  it('increments by amount', () => {
    const counter = useCounter()
    counter.increment(10)
    expect(counter.n).toBe(10)
  })
})
```

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è —Ö—Ä–∞–Ω–∏–ª—Ç–∏—â–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–Ω–∞—Ç—å –æ–¥–Ω—É –≤–∞–∂–Ω—É—é –≤–µ—â—å: **–ø–ª–∞–≥–∏–Ω—ã –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –ø–æ–∫–∞ `pinia` –Ω–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ App**. –≠—Ç–æ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å, —Å–æ–∑–¥–∞–≤ –ø—É—Å—Ç–æ–µ –∏–ª–∏ –ø–æ–¥–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```js
import { setActivePinia, createPinia } from 'pinia'
import { createApp } from 'vue'
import { somePlugin } from '../src/stores/plugin'

// —Ç–æ—Ç –∂–µ –∫–æ–¥, —á—Ç–æ –∏ –≤—ã—à–µ...

// –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–¥–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
const app = createApp({})
beforeEach(() => {
  const pinia = createPinia().use(somePlugin)
  app.use(pinia)
  setActivePinia(pinia)
})
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–≠—Ç–æ–≥–æ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∏—á—å —Å –ø–æ–º–æ—â—å—é `createTestingPinia()`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä pinia, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è –ø–æ–º–æ—â–∏ –≤ –º–æ–¥—É–ª—å–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ù–∞—á–Ω–∏—Ç–µ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `@pinia/testing`:

```shell
npm i -D @pinia/testing
```

–ò –Ω–µ –∑–∞–±—É–¥—å—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä—É—é—â—É—é pinia –≤ –≤–∞—à–∏—Ö —Ç–µ—Å—Ç–∞—Ö –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```js
import { mount } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'
// import any store you want to interact with in tests
import { useSomeStore } from '@/stores/myStore'

const wrapper = mount(Counter, {
  global: {
    plugins: [createTestingPinia()],
  },
})

const store = useSomeStore() // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä—É—é—â—É—é pinia!

// —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø—Ä—è–º—É—é
store.name = 'my new name'
// —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é –ø–∞—Ç—á–∞
store.$patch({ name: 'new name' })
expect(store.name).toBe('new name')

// —ç–∫—à–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω—ã, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Å–≤–æ–π –∫–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
// –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
store.someAction()

expect(store.someAction).toHaveBeenCalledTimes(1)
expect(store.someAction).toHaveBeenLastCalledWith()
```

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Vue 2, –¥–ª—è `@vue/test-utils` —Ç—Ä–µ–±—É–µ—Ç—Å—è [–Ω–µ–º–Ω–æ–≥–æ –∏–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#unit-test-components-vue-2).

### –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ **–≤—Å–µ—Ö –≤–∞—à–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ—Å—Ç–∏—Ä—É—é—â–µ–π pinia, –ø–µ—Ä–µ–¥–∞–≤ –µ–π –æ–±—ä–µ–∫—Ç `initialState`. –≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–µ—Å—Ç–∏—Ä—É—é—â–µ–π pinia –¥–ª—è _–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è_ —Ö—Ä–∞–Ω–∏–ª–∏—â –ø—Ä–∏ –∏—Ö —Å–æ–∑–¥–∞–Ω–∏–∏. –î–æ–ø—É—Å—Ç–∏–º, –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç—Ç–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:

```ts
import { defineStore } from 'pinia'

const useCounterStore = defineStore('counter', {
  state: () => ({ n: 0 }),
  // ...
})
```

–ü–æ—Å–∫–æ–ª—å–∫—É —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–º–µ–µ—Ç –∏–º—è _"counter"_, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç –≤ `initialState`:

```ts
// –≥–¥–µ-—Ç–æ –≤ –≤–∞—à–µ–º —Ç–µ—Å—Ç–µ
const wrapper = mount(Counter, {
  global: {
    plugins: [
      createTestingPinia({
        initialState: {
          counter: { n: 20 }, // –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ —Å 20 –≤–º–µ—Å—Ç–æ 0
        },
      }),
    ],
  },
})

const store = useSomeStore() // –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É—é—â—É—é pinia!
store.n // 20
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—à–µ–Ω–æ–≤

`createTestingPinia` –≤—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –º–∞–≥–∞–∑–∏–Ω–∞, –µ—Å–ª–∏ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ –∏–Ω–∞—á–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –º–∞–≥–∞–∑–∏–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤, —É–∫–∞–∂–∏—Ç–µ `stubActions: false` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `createTestingPinia`:

```js
const wrapper = mount(Counter, {
  global: {
    plugins: [createTestingPinia({ stubActions: false })],
  },
})

const store = useSomeStore()

// –¢–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –≤—ã–∑–æ–≤ –ë–£–î–ï–¢ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
store.someAction()

// ...–Ω–æ –æ–Ω –≤—Å–µ –µ—â–µ –æ–±–µ—Ä–Ω—É—Ç —à–ø–∏–æ–Ω–æ–º, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—ã–∑–æ–≤—ã
expect(store.someAction).toHaveBeenCalledTimes(1)
```

### –£–∫–∞–∑–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ createSpy

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Jest –∏–ª–∏ vitest —Å `globals: true`, `createTestingPinia` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–≥–ª—É—à–∫–∏ —ç–∫—à–µ–Ω–æ–≤', –∏—Å–ø–æ–ª—å–∑—É—è —Ñ—É–Ω–∫—Ü–∏—é spy, –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`jest.fn` –∏–ª–∏ `vitest.fn`). –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –æ–ø—Ü–∏—é [createSpy](/api/interfaces/pinia_testing.TestingOptions.html#createspy):

```js
import sinon from 'sinon'

createTestingPinia({
  createSpy: sinon.spy, // –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ sinon's spy –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
})
```

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ [—Ç–µ—Å—Ç–∞—Ö –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](https://github.com/vuejs/pinia/blob/v2/packages/testing/src/testing.spec.ts ).

### Mocking getters

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ª—é–±–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω –∫–∞–∫ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –≤—Ä—É—á–Ω—É—é –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ:

```ts
import { defineStore } from 'pinia'
import { createTestingPinia } from '@pinia/testing'

const useCounter = defineStore('counter', {
  state: () => ({ n: 1 }),
  getters: {
    double: (state) => state.n * 2,
  },
})

const pinia = createTestingPinia()
const counter = useCounter(pinia)

counter.double = 3 // ü™Ñ –≥–µ—Ç—Ç–µ—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö

// —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ undefined, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
// @ts-expect-error: –æ–±—ã—á–Ω–æ —ç—Ç–æ —á–∏—Å–ª–æ
counter.double = undefined
counter.double // 2 (=1 x 2)
```

### –ü–ª–∞–≥–∏–Ω—ã Pinia

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø–ª–∞–≥–∏–Ω—ã pinia, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –∏—Ö –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `createTestingPinia()`, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã. ***–ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏—Ö —Å –ø–æ–º–æ—â—å—é `testingPinia.use(–º–æ–π –ø–ª–∞–≥–∏–Ω)`***, –∫–∞–∫ –≤—ã –±—ã —Å–¥–µ–ª–∞–ª–∏ —Å –æ–±—ã—á–Ω–æ–π pinia:

```js
import { createTestingPinia } from '@pinia/testing'
import { somePlugin } from '../src/stores/plugin'

// –≤–Ω—É—Ç—Ä–∏ –∫–∞–∫–æ–≥–æ-—Ç–æ —Ç–µ—Å—Ç–∞
const wrapper = mount(Counter, {
  global: {
    plugins: [
      createTestingPinia({
        stubActions: false,
        plugins: [somePlugin],
      }),
    ],
  },
})
```

## –¢–µ—Å—Ç—ã E2E

–ö–æ–≥–¥–∞ –¥–µ–ª–æ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ pinkie, –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤ e2e, –≤ —ç—Ç–æ–º –≤–µ—Å—å —Å–º—ã—Å–ª —Ç–µ—Å—Ç–æ–≤ e2e! –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –º–æ–≥–ª–∏ –±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å HTTP-–∑–∞–ø—Ä–æ—Å—ã, –Ω–æ —ç—Ç–æ –≤—ã—Ö–æ–¥–∏—Ç –¥–∞–ª–µ–∫–æ –∑–∞ —Ä–∞–º–∫–∏ –¥–∞–Ω–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ üòÑ.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Vue 2)

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ [Vue Test Utils 1](https://v1.testutils.vuejs.org/), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Pinia –Ω–∞ `local Vue`:

```js
import { PiniaVuePlugin } from 'pinia'
import { createLocalVue, mount } from '@vue/test-utils'
import { createTestingPinia } from '@pinia/testing'

const localVue = createLocalVue()
localVue.use(PiniaVuePlugin)

const wrapper = mount(Counter, {
  localVue,
  pinia: createTestingPinia(),
})

const store = useSomeStore() // uses the testing pinia!
```
